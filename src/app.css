@import url("https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap");
@import url("https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew:wght@400;700&display=swap");

* {
  box-sizing: border-box;
}

@import "tailwindcss";

@import "@catppuccin/tailwindcss/mocha.css";
@custom-variant dark (&:where(.frappe, .frappe *, .macchiato, .macchiato *, .mocha, .mocha *));

@import "tailwindcss-animated";

@plugin "@tailwindcss/typography";
@theme {
  --font-sans: "JetBrains Mono", sans-serif;
  --font-hebrew: "Noto Sans Hebrew", sans-serif;
}

.font-hebrew {
  font-family: var(--font-hebrew);
}

.font-sans {
  font-family: var(--font-sans);
}

html {
  scroll-behavior: smooth;
}

main {
  -webkit-overflow-scrolling: touch; /* For smooth scrolling on iOS */
}
.skill-chip {
  @apply rounded-md bg-ctp-surface0 px-4 py-2 font-mono text-ctp-text shadow-md transition-all hover:scale-105 hover:text-ctp-base;
}
.skill-chip.c-green {
  @apply hover:bg-ctp-green;
}
.skill-chip.c-sky {
  @apply hover:bg-ctp-sky;
}

.controller-pile-container {
  @apply flex h-16 w-16 items-center justify-center;
  perspective: 500px;
}

.controller-pile {
  @apply relative h-full w-full;
  transform-style: preserve-3d;
  transition: transform 0.4s ease-in-out;
}

.controller-icon {
  @apply absolute h-full w-full object-contain transition-all duration-400 ease-in-out;
  /* Start with a base rotation to create the pile effect */
  transform: rotateX(60deg) rotateZ(-30deg);
}

/* Position each controller in the pile */
.controller-icon:nth-child(1) {
  transform: rotateX(5deg) rotateZ(-10deg) translateZ(0px) translateX(-25px)
    translateY(-10px);
  z-index: 3;
}
.controller-icon:nth-child(2) {
  transform: rotateX(5deg) rotateZ(0deg) translateZ(5px) translateX(0px)
    translateY(10px);
  z-index: 2;
}
.controller-icon:nth-child(3) {
  transform: rotateX(5deg) rotateZ(10deg) translateZ(10px) translateX(25px)
    translateY(-10px);
  z-index: 1;
}

/* Conditional coloring based on theme */
:global(html.latte) .controller-icon {
  filter: invert(1); /* Black for light mode */
}

/* The Exploded View on Hover */
.controller-pile-container:hover .controller-pile {
  transform: scale(1.1);
}

.controller-pile-container:hover .controller-icon {
  transform: rotateX(0deg) rotateZ(0deg); /* Straighten out the icons */
}

/* Fan them out on hover */
.controller-pile-container:hover .controller-icon:nth-child(1) {
  transform: translateY(-35px) translateX(-15px) rotateZ(-15deg);
}
.controller-pile-container:hover .controller-icon:nth-child(2) {
  transform: translateY(-5px);
}
.controller-pile-container:hover .controller-icon:nth-child(3) {
  transform: translateY(25px) translateX(15px) rotateZ(15deg);
}
/* New Thematic Styles */

/* For Game Engines */

/* For Programming Languages */
.blinking-cursor {
  animation: blink 1s step-end infinite;
}
@keyframes blink {
  from,
  to {
    background-color: transparent;
  }
  50% {
    background-color: #a6e3a1; /* ctp-green */
  }
}

/* For Backend & Databases */
.skill-node {
  @apply w-3/4 rounded-lg bg-ctp-surface0 px-4 py-2 text-center font-mono text-ctp-text shadow-lg transition-all hover:scale-105 hover:text-ctp-base;
}

.skill-node.c-sky {
  @apply hover:bg-ctp-sky;
}
.section-animate {
  opacity: 0;
  transform: translateY(50px);
  transition:
    opacity 0.6s ease-out,
    transform 0.6s ease-out;
}

.section-animate.is-visible {
  opacity: 1;
  transform: translateY(0);
}
/* --- Glitch Effect --- */
.glitch {
  position: relative;
  /* Use Catppuccin colors for a cohesive theme */
  color: #cba6f7; /* Mauve */
  /* Animation: name duration timing-function delay iteration-count direction fill-mode */
  animation: glitch-skew 1s infinite linear alternate-reverse;
}

.glitch::before,
.glitch::after {
  content: attr(data-text);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #1e1e2e; /* Base color to prevent transparency issues */
}

/* Red channel glitch */
.glitch::before {
  left: 2px;
  text-shadow: -2px 0 #f38ba8; /* Red */
  clip-path: inset(50% 0 51% 0);
  animation: glitch-anim-1 2s infinite linear alternate-reverse;
}

/* Blue channel glitch */
.glitch::after {
  left: -2px;
  text-shadow: -2px 0 #89b4fa; /* Blue */
  clip-path: inset(0% 0 95% 0);
  animation: glitch-anim-2 3s infinite linear alternate-reverse;
}

/* --- Keyframes --- */

/* Main element's skewing animation */
@keyframes glitch-skew {
  0% {
    transform: skew(0deg);
  }
  5% {
    transform: skew(1deg);
  }
  10% {
    transform: skew(1deg);
  }
  15% {
    transform: skew(-1deg);
  }
  20% {
    transform: skew(-1deg);
  }
  25% {
    transform: skew(0deg);
  }
  100% {
    transform: skew(0deg);
  }
}

/* Animation for the red channel pseudo-element */
@keyframes glitch-anim-1 {
  0% {
    clip-path: inset(50% 0 51% 0);
  }
  20% {
    clip-path: inset(10% 0 85% 0);
  }
  40% {
    clip-path: inset(80% 0 10% 0);
  }
  60% {
    clip-path: inset(40% 0 45% 0);
  }
  80% {
    clip-path: inset(90% 0 5% 0);
  }
  100% {
    clip-path: inset(25% 0 70% 0);
  }
}

/* Animation for the blue channel pseudo-element */
@keyframes glitch-anim-2 {
  0% {
    clip-path: inset(0% 0 95% 0);
  }
  20% {
    clip-path: inset(60% 0 35% 0);
  }
  40% {
    clip-path: inset(20% 0 75% 0);
  }
  60% {
    clip-path: inset(95% 0 2% 0);
  }
  80% {
    clip-path: inset(15% 0 80% 0);
  }
  100% {
    clip-path: inset(70% 0 25% 0);
  }
}
